<!DOCTYPE html><html lang="pt-BR"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Better Data Structures Printing (Debug Mode) · BuckleScript</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="You might have seen that using `Js.log` to print records, variants and others don&#x27;t print out record field names and variant tags. Record, for example, is compiled into an array (the field names are removed). This is partially for performance, and partially because of [insert excuse here]."/><meta name="docsearch:language" content="pt-BR"/><meta property="og:title" content="Better Data Structures Printing (Debug Mode) · BuckleScript"/><meta property="og:type" content="website"/><meta property="og:url" content="https://bucklescript.github.io/"/><meta property="og:description" content="You might have seen that using `Js.log` to print records, variants and others don&#x27;t print out record field names and variant tags. Record, for example, is compiled into an array (the field names are removed). This is partially for performance, and partially because of [insert excuse here]."/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/logos/bucklescript.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"/><link rel="alternate" type="application/atom+xml" href="https://bucklescript.github.io/blog/atom.xml" title="BuckleScript Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://bucklescript.github.io/blog/feed.xml" title="BuckleScript Blog RSS Feed"/><script type="text/javascript" src="/js/toggleSyntaxButton.js"></script><script type="text/javascript" src="/js/redirectToNewDoc.js"></script><script type="text/javascript" src="/js/pjax-api.min.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/pt-BR"><img class="logo" src="/img/logos/bucklescript.svg" alt="BuckleScript"/><h2 class="headerTitleWithLogo">BuckleScript</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/pt-BR/installation" target="_self">Docs</a></li><li class=""><a href="/docs/pt-BR/playground" target="_self">Try</a></li><li class="siteNavGroupActive"><a href="/docs/pt-BR/stdlib-overview" target="_self">API</a></li><li class=""><a href="/docs/pt-BR/community" target="_self">Community</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg" alt="Languages icon"/>Português (Brasil)</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/ja/better-data-structures-printing-debug-mode">日本語</a></li><li><a href="/docs/en/better-data-structures-printing-debug-mode">English</a></li><li><a href="/docs/es-ES/better-data-structures-printing-debug-mode">Español</a></li><li><a href="/docs/fr/better-data-structures-printing-debug-mode">Français</a></li><li><a href="/docs/ko/better-data-structures-printing-debug-mode">한국어</a></li><li><a href="/docs/ru/better-data-structures-printing-debug-mode">Русский</a></li><li><a href="/docs/zh-CN/better-data-structures-printing-debug-mode">中文</a></li><li><a href="/docs/zh-TW/better-data-structures-printing-debug-mode">繁體中文</a></li><li><a href="https://crowdin.com/project/bucklescript" target="_blank" rel="noreferrer noopener">Help Translate</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="https://github.com/bucklescript/bucklescript" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Interop</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Intro</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/pt-BR/what-why">What &amp; Why</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/installation">Installation</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/new-project">New Project</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/try">Try</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/concepts-overview">Concepts Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/upgrade-to-v7">Upgrade Guide to v7</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Interop</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/pt-BR/interop-overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/interop-cheatsheet">Cheatsheet</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/embed-raw-javascript">Embed Raw JavaScript</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/common-data-types">Common Data Types</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/intro-to-external">Intro to External</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/bind-to-global-values">Bind to Global Values</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/null-undefined-option">Null, Undefined &amp; Option</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/object">Object</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/object-2">Object 2</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/class">Class</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/function">Function</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/property-access">Property access</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/return-value-wrapping">Return value wrapping</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/import-export">Import &amp; Export</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/regular-expression">Regular Expression</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/exceptions">Exceptions</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/json">JSON</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/pipe-first">Pipe First</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/generate-converters-accessors">Generate Converters &amp; Helpers</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/pt-BR/better-data-structures-printing-debug-mode">Better Data Structures Printing (Debug Mode)</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/nodejs-special-variables">NodeJS Special Variables</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/interop-misc">Miscellaneous</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/browser-support-polyfills">Browser Support &amp; Polyfills</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Build System</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/pt-BR/build-overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/build-configuration">Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/automatic-interface-generation">Automatic Interface Generation</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/interop-with-js-build-systems">Interop with Other Build System</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/build-performance">Performance</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/build-advanced">Advanced</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Standard Library</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/pt-BR/stdlib-overview">Overview</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Advanced</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/pt-BR/conditional-compilation">Conditional Compilation</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/extended-compiler-options">Extended Compiler Options</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/use-existing-ocaml-libraries">Use Existing OCaml Libraries</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/difference-from-native-ocaml">Difference from Native OCaml</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/compiler-architecture-principles">Compiler Architecture &amp; Principles</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/comparison-to-jsoo">Comparison to Js_of_ocaml</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://crowdin.com/project/bucklescript/pt-BR" target="_blank" rel="noreferrer noopener">Translate</a><h1 class="postHeaderTitle">Better Data Structures Printing (Debug Mode)</h1></header><article><div><span><p>You might have seen that using <code>Js.log</code> to print records, variants and others don't print out record field names and variant tags. Record, for example, is compiled into an array (the field names are removed). This is partially for performance, and partially because of [insert excuse here].</p>
<p>To remediate this, we introduce a flag for <code>bsc</code> (the BuckleScript compiler), <code>-bs-g</code>, that retains record fields names, variant tags, exception names, module names, etc.</p>
<table>
  <thead> <tr><th>Before</th><th>After</th></tr> </thead>
  <tbody>
    <tr>
      <td>
        <img src="/img/debugger-before.png" alt="debugger before">
      </td>
      <td style="vertical-align: middle">
        <img src="/img/debugger-after.png" alt="debugger after">
      </td>
    </tr>
  </tbody>
</table>
<p><strong>Note</strong>: this is for <strong>debugging only</strong>. Please don't forget to undo this for production.</p>
<h2><a class="anchor" aria-hidden="true" id="usage"></a><a href="#usage" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Usage</h2>
<ul>
<li>Add <code>&quot;bsc-flags&quot;: [&quot;-bs-g&quot;]</code> to your <code>bsconfig.json</code>.</li>
<li>In the BuckleScript/Reason file you'd like to debug, add <code>[%%debugger.chrome]</code> at the top *.</li>
<li>If you're on Node.js, run: <code>node --inspect-brk MyCompiledFile.js</code> and open this URL in Chrome: <code>chrome://inspect</code>.</li>
<li>Make sure you've got <a href="http://www.mattzeunert.com/2016/02/19/custom-chrome-devtools-object-formatters.html">Chrome custom formatter enabled</a>.</li>
<li>Click on inspect, then step through code as you would usually:</li>
</ul>
<p><img src="/img/debugger-inspector.png" alt="debugger inspector"></p>
<p>This custom formatter is still experimental; feel free to contribute to it <a href="https://github.com/BuckleScript/bucklescript/blob/master/jscomp/others/belt_Debug.ml">here</a>!</p>
<p><strong>Note</strong>: you need to restart <code>node</code> every time your files changes.</p>
<p><strong>Note</strong>: don't forget to remove <code>-bs-g</code> from your <code>bsconfig.json</code> for production!</p>
<h2><a class="anchor" aria-hidden="true" id="tips-tricks"></a><a href="#tips-tricks" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tips &amp; Tricks</h2>
<p><a href="https://nodejs.org/en/docs/guides/debugging-getting-started/#inspector-clients">Here are other ways</a> to debug using node/Chrome.</p>
<p>* The extension <code>[%%debugger.chrome]</code> conditionally turns on the debugger support. Feel free to keep it on at all time; it will not generate any extra garbage code <strong>unless</strong> you have <code>-bs-g</code> flag turned on above.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/pt-BR/generate-converters-accessors"><span class="arrow-prev">← </span><span>Generate Converters &amp; Helpers</span></a><a class="docs-next button" href="/docs/pt-BR/nodejs-special-variables"><span class="function-name-prevnext">NodeJS Special Variables</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#usage">Usage</a></li><li><a href="#tips-amp-tricks">Tips &amp; Tricks</a></li></ul></nav></div><span></span></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '0fd97db83891aa20810559812d9e69ac',
                indexName: 'bucklescript',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["lang:pt-BR"]}
              });
            </script></body></html>