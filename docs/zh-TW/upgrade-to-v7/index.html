<!DOCTYPE html><html lang="zh-TW"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Upgrade Guide to v7 · BuckleScript</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="If you have been using BuckleScript for the last couple of years, you probably noticed that upgrading to the newest version has always been a seamless experience without any breaking changes or performance loss. That&#x27;s because the BuckleScript team puts a lot of effort in making sure users can upgrade as soon as possible without any changes in their workflow."/><meta name="docsearch:language" content="zh-TW"/><meta property="og:title" content="Upgrade Guide to v7 · BuckleScript"/><meta property="og:type" content="website"/><meta property="og:url" content="https://bucklescript.github.io/"/><meta property="og:description" content="If you have been using BuckleScript for the last couple of years, you probably noticed that upgrading to the newest version has always been a seamless experience without any breaking changes or performance loss. That&#x27;s because the BuckleScript team puts a lot of effort in making sure users can upgrade as soon as possible without any changes in their workflow."/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/logos/bucklescript.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"/><link rel="alternate" type="application/atom+xml" href="https://bucklescript.github.io/blog/atom.xml" title="BuckleScript Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://bucklescript.github.io/blog/feed.xml" title="BuckleScript Blog RSS Feed"/><script type="text/javascript" src="/js/toggleSyntaxButton.js"></script><script type="text/javascript" src="/js/redirectToNewDoc.js"></script><script type="text/javascript" src="/js/pjax-api.min.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/zh-TW"><img class="logo" src="/img/logos/bucklescript.svg" alt="BuckleScript"/><h2 class="headerTitleWithLogo">BuckleScript</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/zh-TW/installation" target="_self">Docs</a></li><li class=""><a href="/docs/zh-TW/playground" target="_self">Try</a></li><li class="siteNavGroupActive"><a href="/docs/zh-TW/stdlib-overview" target="_self">API</a></li><li class=""><a href="/docs/zh-TW/community" target="_self">Community</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg" alt="Languages icon"/>繁體中文</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/ja/upgrade-to-v7">日本語</a></li><li><a href="/docs/en/upgrade-to-v7">English</a></li><li><a href="/docs/es-ES/upgrade-to-v7">Español</a></li><li><a href="/docs/fr/upgrade-to-v7">Français</a></li><li><a href="/docs/ko/upgrade-to-v7">한국어</a></li><li><a href="/docs/pt-BR/upgrade-to-v7">Português (Brasil)</a></li><li><a href="/docs/ru/upgrade-to-v7">Русский</a></li><li><a href="/docs/zh-CN/upgrade-to-v7">中文</a></li><li><a href="https://crowdin.com/project/bucklescript" target="_blank" rel="noreferrer noopener">協助翻譯</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="https://github.com/bucklescript/bucklescript" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Intro</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Intro</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-TW/what-why">What &amp; Why</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/installation">Installation</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/new-project">New Project</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/try">Try</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/concepts-overview">Concepts Overview</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/zh-TW/upgrade-to-v7">Upgrade Guide to v7</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Interop</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-TW/interop-overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/interop-cheatsheet">Cheatsheet</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/embed-raw-javascript">Embed Raw JavaScript</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/common-data-types">Common Data Types</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/intro-to-external">Intro to External</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/bind-to-global-values">Bind to Global Values</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/null-undefined-option">Null, Undefined &amp; Option</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/object">Object</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/object-2">Object 2</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/class">Class</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/function">Function</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/property-access">Property access</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/return-value-wrapping">Return value wrapping</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/import-export">Import &amp; Export</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/regular-expression">Regular Expression</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/exceptions">Exceptions</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/json">JSON</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/pipe-first">Pipe First</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/generate-converters-accessors">Generate Converters &amp; Helpers</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/better-data-structures-printing-debug-mode">Better Data Structures Printing (Debug Mode)</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/nodejs-special-variables">NodeJS Special Variables</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/interop-misc">Miscellaneous</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/browser-support-polyfills">Browser Support &amp; Polyfills</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Build System</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-TW/build-overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/build-configuration">Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/automatic-interface-generation">Automatic Interface Generation</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/interop-with-js-build-systems">Interop with Other Build System</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/build-performance">Performance</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/build-advanced">Advanced</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Standard Library</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-TW/stdlib-overview">Overview</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Advanced</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/zh-TW/conditional-compilation">Conditional Compilation</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/extended-compiler-options">Extended Compiler Options</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/use-existing-ocaml-libraries">Use Existing OCaml Libraries</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/difference-from-native-ocaml">Difference from Native OCaml</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/compiler-architecture-principles">Compiler Architecture &amp; Principles</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-TW/comparison-to-jsoo">Comparison to Js_of_ocaml</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://crowdin.com/project/bucklescript/zh-TW" target="_blank" rel="noreferrer noopener">Translate</a><h1 class="postHeaderTitle">Upgrade Guide to v7</h1></header><article><div><span><p>If you have been using BuckleScript for the last couple of years, you probably noticed that upgrading to the newest version has always been a seamless experience without any breaking changes or performance loss. That's because the BuckleScript team puts a lot of effort in making sure users can upgrade as soon as possible without any changes in their workflow.</p>
<p>That said, this time with the v7 release, there have been some fundamental compiler changes, which means that upgrades will involve a few more installation steps than usual (depending on your project setup). Luckily, the upgrade should still be straight forward and easy to do.</p>
<p>This guide will highlight some of the changes and give you a list of instructions to upgrade your BuckleScript projects.</p>
<blockquote>
<p><strong>Note:</strong> You probably noticed that the version number jumped from v5 to v7. The v6 version was used for the transition phase, so if you are using v6 right now, just upgrade to <code>bs-platform@7</code> and you are good to go.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="a-quick-look-under-the-hood"></a><a href="#a-quick-look-under-the-hood" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>A Quick Look under the Hood</h2>
<p>BuckleScript v7 (and v6) changed the underlying OCaml version from <code>4.02.3</code> (BS v5) to <code>4.06.1</code>. Usually this shouldn't impact any existing codebases, unless they are using PPXes or other meta programming facilities. Simply explained, PPXes rely on the data representation of the OCaml / Reason syntax (AST), so if you are using a tool such as <code>graphql_ppx</code> (which has usually been compiled natively with a <code>4.02.3</code> OCaml version) you will get a compatibility error when used with BuckleScript v7.</p>
<p>Luckily during the transition phase between v5 and v7 (which has been an ongoing process for for several months), the community has been <a href="https://github.com/BuckleScript/bucklescript/issues/3914">coordinating efforts</a> to upgrade and release commonly used tools to BS v7 compatible compile artifacts. You will find all installation instructions in this guide as well.</p>
<h3><a class="anchor" aria-hidden="true" id="bs-version-overview-features"></a><a href="#bs-version-overview-features" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>BS Version Overview / Features</h3>
<ul>
<li><em>BS 5.x and below</em>: based on OCaml 4.02.3</li>
<li><em>BS 6.x and above</em>: based on OCaml 4.06.1 (transition version: if in use, upgrade to v7 now)</li>
<li><em>BS 7.x and above</em>: based on OCaml 4.06.1 (stops 4.02.3 support)
<ul>
<li>Adds <a href="https://caml.inria.fr/pub/docs/manual-ocaml/manual040.html"><code>Inline Records</code></a> support (introduced with <code>4.03</code>)</li>
<li>Adds the <code>Records-as-Objects</code> feature, which makes BS compile record type values into JS objects instead of nested arrays (see blog <a href="/blog/2019/11/18/whats-new-in-7">post 1</a> and <a href="/blog/2019/12/27/whats-new-in-7-cont">post 2</a>)</li>
<li>Ships with <code>refmt</code> version <code>3.5.1</code> with greatly improved syntax error messages (codename <code>reerror</code>)</li>
</ul></li>
</ul>
<p>The biggest upside of upgrading to BS v7, beside enjoying newer language features, is that we will finally be able to deprecate  underlying OCaml <code>4.02.3</code> code, which will make maintenance way easier (lots of code / processes can be removed and simplified). Also the OCaml community will greatly benefit from this change, since a lot of OCaml libraries still have to support a minimum OCaml version of <code>4.02.3</code> just for BuckleScript &lt;= v5 compatibility.</p>
<blockquote>
<p>We recommend upgrading to BS v7 as soon as possible. Your Reason code will still work as expected, you'll only need to upgrade your native tools to make everything behave correctly.</p>
</blockquote>
<p>Please support us moving forward and help us by providing bug reports in case you have any issues.</p>
<h2><a class="anchor" aria-hidden="true" id="how-to-upgrade-to-v7"></a><a href="#how-to-upgrade-to-v7" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How to upgrade to v7</h2>
<h3><a class="anchor" aria-hidden="true" id="dependencies"></a><a href="#dependencies" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Dependencies</h3>
<p><strong>Note:</strong> During the migration phase, some projects / repositories have changed owners or Github organizations to make it easier for us to upgrade build artifacts in the future. If you are using a PPX we are not aware of, please <a href="https://github.com/BuckleScript/bucklescript/issues/3914">let us know in this issue</a>.</p>
<ul>
<li><p><strong>Upgrade your bs-platform dependency:</strong></p>
<ul>
<li><code>npm install bs-platform@7 --dev</code></li>
</ul></li>
<li><p><strong>Upgrade any PPX dependencies you're using:</strong></p>
<ul>
<li><a href="https://github.com/mhallin/graphql_ppx"><code>graphql_ppx</code></a> -&gt; <a href="https://github.com/baransu/graphql_ppx_re"><code>graphql_ppx_re</code></a>:
<ul>
<li>Remove the <a href="https://github.com/mhallin/graphql_ppx">deprecated <code>graphql_ppx</code> (by mhallin)</a>: <code>npm remove graphql_ppx</code></li>
<li>Add the new one: <code>npm install @baransu/graphql_ppx_re --save-dev</code></li>
<li>Update your <code>ppx-flags</code>: <code>&quot;ppx-flags&quot;: [&quot;@baransu/graphql_ppx_re/ppx6&quot;]</code></li>
</ul></li>
<li><a href="https://github.com/cristianoc/genType"><code>gentype</code></a>:
<ul>
<li><code>npm install gentype@3 --save-dev</code></li>
</ul></li>
<li><a href="https://github.com/reasonml-labs/decco"><code>decco</code></a>:
<ul>
<li><code>npm install decco@1 --save-dev</code></li>
</ul></li>
<li><a href="https://github.com/reasonml-labs/bs-let"><code>bs-let</code></a>:
<ul>
<li><code>npm install --save-dev bs-let</code></li>
<li>Update your <code>ppx-flags</code>: <code>&quot;ppx-flags&quot;: [&quot;bs-let/ppx&quot;]</code></li>
</ul></li>
<li><a href="https://github.com/ahrefs/bs-emotion"><code>bs-emotion-ppx</code></a>:
<ul>
<li><code>npm install bs-emotion-ppx@1 --save-dev</code></li>
<li>Update your <code>ppx-flags</code>: <code>&quot;ppx-flags&quot;: [&quot;@ahrefs/bs-emotion-ppx/bin/bs-emotion-ppx&quot;]</code></li>
</ul></li>
<li><a href="https://github.com/MinimaHQ/bs-log"><code>bs-log</code></a>
<ul>
<li>Currently WIP and <a href="https://github.com/MinimaHQ/bs-log/issues/10">not done yet</a></li>
</ul></li>
<li><a href="https://github.com/astrada/ppx_bs_css"><code>ppx_bs_css</code></a>:
<ul>
<li>No upgrade activity yet, please <a href="https://github.com/BuckleScript/bucklescript/issues/3914">let us know</a> if you are using it!</li>
</ul></li>
</ul></li>
<li><p><strong>Clean &amp; Rebuild your project:</strong></p>
<ul>
<li><code>npx bsb -clean-world</code></li>
<li><code>npx bsb -make-world</code></li>
<li>Your project should now be built and working correctly</li>
</ul></li>
<li><p><strong>Fix specific warnings:</strong></p>
<ul>
<li><code>BuckleScript warning: isWebUri : the external name is inferred from val name is unsafe from refactoring when changing value name</code>
<ul>
<li>This  means that you have <code>external</code> bindings ending with <code>= &quot;&quot;;</code> (which will automatically take the name of the binding itself), you now need to be explicit with the name. Example:
<pre><code class="hljs css language-reason"><span class="hljs-comment">/* Before (warning) */</span>
<span class="hljs-attribute">[@bs.module "valid-url"]</span>
<span class="hljs-keyword">external</span> isWebUri: string =&gt; option(string) = <span class="hljs-string">""</span>;

<span class="hljs-comment">/* After (fixed the warning) */</span>
<span class="hljs-attribute">[@bs.module "valid-url"]</span>
<span class="hljs-keyword">external</span> isWebUri: string =&gt; option(string) = <span class="hljs-string">"isWebUri"</span>;
</code></pre></li>
</ul></li>
<li>Don't forget to rebuild your project again</li>
</ul></li>
<li><p><strong>Commit your changes:</strong></p>
<ul>
<li>Your <code>.bs.js</code> files will very likely change, make sure to commit everything to have a clean BS upgrade commit</li>
</ul></li>
</ul>
<p><strong>Note:</strong> Since this upgrade will change the internal data representation of records to JS objects, make sure you are not having any Reason code relying on the previous record-as-array representation. This is a quick reminder that it is generally discouraged to rely on internal data structures.</p>
<h3><a class="anchor" aria-hidden="true" id="editor-extensions"></a><a href="#editor-extensions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Editor extensions</h3>
<ul>
<li><a href="https://github.com/jaredly/reason-language-server"><code>reason-vscode / reason-language-server</code></a>: Should just work, especially when upgraded to the newest version</li>
<li><a href="https://github.com/ocaml/merlin"><code>merlin</code></a>: Make sure your <code>ocamlmerlin</code> binary is compiled for <code>4.06.1</code> and correctly set in your PATH, other than that it should just work</li>
<li><a href="https://github.com/reasonml-editor/reasonml-idea-plugin"><code>reasonml-idea-plugin</code></a>: Upgrade to version <code>v0.76</code> or above</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="how-to-upgrade-ppxes-for-tool-maintainers"></a><a href="#how-to-upgrade-ppxes-for-tool-maintainers" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How to upgrade PPXes (for tool maintainers)</h2>
<h3><a class="anchor" aria-hidden="true" id="step-1-upgrade-build-dependencies"></a><a href="#step-1-upgrade-build-dependencies" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step 1: Upgrade build dependencies</h3>
<p>We recommend using <a href="https://esy.sh">esy</a> for building your native project, so all instructions are based on the <code>esy</code> workflows. Mostly it's about setting the OCaml version to 4.06 and rebuild the project accordingly (e.g. in your <code>package.json</code>):</p>
<pre><code class="hljs css language-json">"devDependencies": {
    "ocaml": "~4.6.1000",
    "@opam/dune": "*",
}
</code></pre>
<p>If you are using <code>migrate-parse-tree</code>, you might want to drop any AST upgrades from 4.02 -&gt; 4.06 etc, making the native binary more lightweight.</p>
<p><strong>Tip:</strong> If you still want to maintain a <code>4.02.3</code> based version (for legacy reasons), you can alternatively create a <code>esy.json</code> / <code>esy-406.json</code> file and use <code>esy's</code> <a href="https://esy.sh/docs/en/multiple-sandboxes.html#configure-multiple-sandboxes">sandboxing feature</a>.</p>
<p>We know that these instructions are very rough, many projects use different configurations. To give you some inspiration on how to tackle an upgrade, here is a list of migrations / project setups you might find useful:</p>
<ul>
<li><code>bs-emotion-ppx</code>: <a href="https://github.com/ahrefs/bs-emotion/commit/d93f35754d2ba3000d5ffa9fe17ae158da6dfc38">Full migration diff by anmonteiro</a></li>
<li><code>graphql_ppx_re</code>: <a href="https://github.com/baransu/graphql_ppx_re/blob/master/esy.json">package.json with 4.06 support</a> // <a href="https://github.com/baransu/graphql_ppx_re/blob/master/402.json">402.json for esy sandbox</a></li>
<li><code>decco</code>: <a href="https://github.com/reasonml-labs/decco/blob/master/ppx_src/package.json">package.json for 4.06</a></li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="step-2-release-artifacts-and-add-a-proper-note-in-the-readme"></a><a href="#step-2-release-artifacts-and-add-a-proper-note-in-the-readme" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step 2: Release artifacts and add a proper Note in the README</h3>
<p>Make sure to release the newly built binary on npm and make clear which PPX versions are compatible with BS6 / BS5 etc. For example, this is how <code>gentype</code> does it:</p>
<pre><code class="hljs css language-text">bs-platform 7.0.0 or higher: use genType 3.2.0 or higher.
bs-platform 6.2.0 or higher: use genType 3.0.0 or higher.
bs-platform 5.2.0 or higher: use genType 2.40.0 or higher.
bs-platform 5.0.x and 5.1.x: use genType 2.17.0 or higher.
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="conclusion"></a><a href="#conclusion" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conclusion</h2>
<p>We are really excited for the upcoming future of BuckleScript. The v7 release will make JS interop considerably easier while being completely compatible with existing codebases.</p>
<p>If you are experiencing any installation / upgrade issues, please be sure to either check the BuckleScript <a href="https://github.com/bucklescript/bucklescript/issues">issue tracker</a>, or drop us a message in <a href="https://discord.gg/reasonml">Discord</a>.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/zh-TW/concepts-overview"><span class="arrow-prev">← </span><span>Concepts Overview</span></a><a class="docs-next button" href="/docs/zh-TW/interop-overview"><span>Overview</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#a-quick-look-under-the-hood">A Quick Look under the Hood</a><ul class="toc-headings"><li><a href="#bs-version-overview-features">BS Version Overview / Features</a></li></ul></li><li><a href="#how-to-upgrade-to-v7">How to upgrade to v7</a><ul class="toc-headings"><li><a href="#dependencies">Dependencies</a></li><li><a href="#editor-extensions">Editor extensions</a></li></ul></li><li><a href="#how-to-upgrade-ppxes-for-tool-maintainers">How to upgrade PPXes (for tool maintainers)</a><ul class="toc-headings"><li><a href="#step-1-upgrade-build-dependencies">Step 1: Upgrade build dependencies</a></li><li><a href="#step-2-release-artifacts-and-add-a-proper-note-in-the-readme">Step 2: Release artifacts and add a proper Note in the README</a></li></ul></li><li><a href="#conclusion">Conclusion</a></li></ul></nav></div><span></span></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '0fd97db83891aa20810559812d9e69ac',
                indexName: 'bucklescript',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["lang:zh-TW"]}
              });
            </script></body></html>