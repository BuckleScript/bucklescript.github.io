<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>In search of lightning feedback loop in a large codebase · BuckleScript</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="As software developers, when we touch a codebase, we want the edit-compile cycle, to be as short as possible. Studies show that feedback loop less than 1s, or 100ms will prevent devleopers getting distracted. "/><meta name="docsearch:language" content="en"/><meta property="og:title" content="In search of lightning feedback loop in a large codebase · BuckleScript"/><meta property="og:type" content="website"/><meta property="og:url" content="https://bucklescript.github.io/blog/2019/01/11/scalable"/><meta property="og:description" content="As software developers, when we touch a codebase, we want the edit-compile cycle, to be as short as possible. Studies show that feedback loop less than 1s, or 100ms will prevent devleopers getting distracted. "/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/logos/bucklescript.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"/><link rel="alternate" type="application/atom+xml" href="https://bucklescript.github.io/blog/atom.xml" title="BuckleScript Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://bucklescript.github.io/blog/feed.xml" title="BuckleScript Blog RSS Feed"/><script type="text/javascript" src="/js/toggleSyntaxButton.js"></script><script type="text/javascript" src="/js/redirectToNewDoc.js"></script><script type="text/javascript" src="/js/pjax-api.min.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/en"><img class="logo" src="/img/logos/bucklescript.svg" alt="BuckleScript"/><h2 class="headerTitleWithLogo">BuckleScript</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/en/installation" target="_self">Docs</a></li><li class=""><a href="/docs/en/playground" target="_self">Try</a></li><li class=""><a href="/docs/en/stdlib-overview" target="_self">API</a></li><li class=""><a href="/docs/en/community" target="_self">Community</a></li><li class="siteNavGroupActive"><a href="/blog/" target="_self">Blog</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg" alt="Languages icon"/>English</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/ja">日本語</a></li><li><a href="/es-ES">Español</a></li><li><a href="/fr">Français</a></li><li><a href="/ko">한국어</a></li><li><a href="/pt-BR">Português (Brasil)</a></li><li><a href="/ru">Русский</a></li><li><a href="/zh-CN">中文</a></li><li><a href="/zh-TW">繁體中文</a></li><li><a href="https://crowdin.com/project/bucklescript" target="_blank" rel="noreferrer noopener">Help Translate</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="https://github.com/bucklescript/bucklescript" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Recent Posts</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Recent Posts</h3><ul class=""><li class="navListItem"><a class="navItem" href="/blog/2020/05/06/exception-encoding">A story of exception encoding in BuckleScript</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/04/13/release-7-3">What&#x27;s new in release 7.3</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/03/26/generalize-uncurry">Generalized uncurry support in BuckleScript 7.3</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/03/12/release-7-2">Announcing bs-platform  7.2</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/02/20/loading-stdlib-in-memory">Loading stdlib from memory</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer postContainer blogContainer"><div class="wrapper"><div class="lonePost"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle"><a href="/blog/2019/01/11/scalable">In search of lightning feedback loop in a large codebase</a></h1><p class="post-meta">January 11, 2019</p><div class="authorBlock"></div></header><div><span><p>As software developers, when we touch a codebase, we want the edit-compile cycle, to be as short as possible. Studies show that feedback loop less than 1s, or 100ms will prevent devleopers getting distracted.</p>
<p>This seems to be possible in a small project, but as project grows to 10k files, or even more,
100k files in a large company like Google, Facebook, this seems to be extremely challenging.</p>
<p>In this article, we are talking about how BuckleScript - it supports both OCaml and ReasonML syntax - is trying to solve this issue.</p>
<p>The edit-build cycle in BuckleScript consists of two components: the compiler which does type checking and code generation and the scheduler which figures out what to rebuild and how to do it concurrently.</p>
<h2><a class="anchor" aria-hidden="true" id="the-importance-of-compilers-cold-performance"></a><a href="#the-importance-of-compilers-cold-performance" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The importance of compiler's cold performance</h2>
<p>In order to reduce the edit-build latency, some languages adopt an approach of in memory compiler + watch mode. We think this is not a scalable or reliable approach.</p>
<p>A compiler is a complex piece of software, the chance that a compiler has memory leak is not low. It is not observed in real world since compiler is used mostly in a short-lived setting, it starts up fast and dies off quickly.</p>
<p>However, this is decimated when compiler is put in server mode. When we have 10k or 100k files held in memory, it is very easy to observe OOM (out of memory issues).</p>
<p>We figured that to deliver a scalable and reliable system, it is better to decouple the compiler's complexity from the scheduler. When the compiler cold starts and dies off quickly, the operating system process mechanism serves as an obviously correct garbage collector, which increases the reliability of the whole system.</p>
<p>To reduce such latency in a single compiler's workload, we spent lots of time tweaking the performance of the compiler itself, for example, rewriting the hot path in C code, most BuckleScript compiler source code is written in an imperative C-style to avoid allocation.</p>
<p>To have a general idea of how fast BuckleScript's compiler runs:</p>
<pre><code class="hljs">test&gt;cat fib.ml
<span class="hljs-keyword">let</span> rec fib = function
  | <span class="hljs-type">0</span> | <span class="hljs-type">1</span> -&gt; <span class="hljs-number">1</span>
  | <span class="hljs-type">n</span> -&gt; fib (n - <span class="hljs-number">1</span>) + fib (n - <span class="hljs-number">2</span>)
</code></pre>
<pre><code class="hljs">test&gt;time /usr/local/<span class="hljs-class"><span class="hljs-keyword">lib</span>/<span class="hljs-title">node_modules</span>/<span class="hljs-title">bs</span>-<span class="hljs-title">platform</span>/<span class="hljs-title">lib</span>/<span class="hljs-title">bsc</span>.<span class="hljs-title">exe</span> -<span class="hljs-title">bs</span>-<span class="hljs-title">cmi</span> -<span class="hljs-title">bs</span>-<span class="hljs-title">cmj</span> -<span class="hljs-title">c</span> <span class="hljs-title">fib</span>.<span class="hljs-title">ml</span></span>

real    <span class="hljs-number">0</span>m0.<span class="hljs-number">0</span>08s
user    <span class="hljs-number">0</span>m0.<span class="hljs-number">0</span>04s
sys     <span class="hljs-number">0</span>m0.<span class="hljs-number">0</span>03s
</code></pre>
<p>Having a compiler run fast with a cold start lays the groundwork so that it won't be the bottleneck in the whole process. This is because when the architecture decouple the compiler from the scheduler, the compiler will be invoked by the scheduler hunderds of thousands of times in a build cycle, the latency of the compiler in a single compilation unit will add up.</p>
<h2><a class="anchor" aria-hidden="true" id="the-art-of-being-incremental"></a><a href="#the-art-of-being-incremental" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The art of being incremental</h2>
<p>Having a compiler running fast in cold mode does not solve the scalability issue alone. Take a code base which contains 100K source files for example, 100ms per file would result in 10,000s latency which is not acceptable. To solve such issue, we need reduce the workload as much as possible during each edit-build cycle.</p>
<p>In a statically typed language, suppose we have two compilation units A , B, and B depends on A. Whenever A changes, B gets recompiled, to make it worse, the recompilation propogates, all dependencies of B get recompiled, which will result in a snowball effect. In this model, whenever we touch the non-leaf compilation unit, the latency would be large.</p>
<p>The key observation here for BuckleScript is that B does not really
depend on the last modified time of A, it depends on the intermediate output of A (e.g, <code>.cmj</code> and <code>.cmi</code> file) which may not change even if we modify A. What we work on here is to reduce the probability of changing A's intermediate output due to changing A. With the integration of a scheduler, it can help stop the propagation as early as possible.</p>
<p>In BuckleScript, each compilation unit is composed of two files, the implementation file and interface file which are compiled to intermediate output .cmj and .cmi separately.</p>
<p>The interface builds are completely separate from implemetation, it does not depend on .cmj (implementation intermediate output) at all.</p>
<p>Suppose the interface is not changed, whenever we touch the implementation file, BuckleScript designs the data structure of <code>.cmj</code> in a way that the content of <code>.cmj</code> is seldom changed. (Let's say its probability is 0.05 which is rare in cases when the arity of a function changed)</p>
<p>If neither <code>.cmj</code> nor <code>.cmi</code>  gets changed, the scheduler would stop propagation.</p>
<p>Suppose the <code>.cmj</code> file is still changed (P = 0.05), A's dependency B would get recompiled. Note <code>B.cmi</code> only depends on <code>A.cmi</code>, so it will not get compiled, only <code>B.cmj</code> will get recompiled, its chances that <code>B.cmj</code> gets changed will be even lower. In practice, the probabiity of the length of propagation chain is more than two is less than</p>
<pre><code class="hljs"><span class="hljs-number">0.05</span> * <span class="hljs-number">0.05</span> = <span class="hljs-number">0.0025</span>
</code></pre>
<p>This means when we are in an edit-build cycle, whenever A gets changed, it may have many direct dependencies, but the longest rebuild sequence will get settled in at most two compilation units. Suppose the scheduler schedule the tasks in parallel, the longest sequence is bound by two, which means the rebuild cycle is very close to compiling two compilation units.</p>
<p>In implementation, we also generalized the idea of stopping propogation of .cmi changes, so whenever we are adding some comments in the interface file, it will
get settled quickly.</p>
<p>The worst case is that the root of an interface changed. In such case, it does not mean all its dependencies will get recompiled, it depends on how many dependencies' interface depend on the root's interface. The cool thing is that since interface's dependency chain is completely decoupled from implementation's dependency, actually it used to be a subset of implementation's dependency chain, so only a subset of its dependencies will get compiled. We will see a concrete an example later.</p>
<h2><a class="anchor" aria-hidden="true" id="a-fast-scheduler"></a><a href="#a-fast-scheduler" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>A fast scheduler</h2>
<p>As we said, the time spent in an edit-build cycle is mostly composed of two parts: compiling invoking the compiler, scheduling.</p>
<p>We are reusing the very fast scheduler provided by <a href="https://ninja-build.org/manual.html">Ninja</a></p>
<blockquote>
<p>Where other build systems are high-level languages, Ninja aims to be an assembler.</p>
</blockquote>
<p>BuckleScript outputs assembler style instructions consumed by
Ninja which does scheduling very fast and provides good parallelism. By integrating with Ninja's <code>restat</code> attribute, we are able to implement the idea of a specialized content based build system.</p>
<p>It is fast enough for 99% of use cases. For a project less than 1k files, the time spent in an edit-build cycle is dominated by the compiler, but as project grows to 10K files or even more, the time spent in compiler is stable and bounded due to our incremental design, however, the time will start be dominated by the scheduler.</p>
<p>For a nop build around 10k files, it takes around 700ms for Ninja to figure out nothing needs to be rebuilt.</p>
<p>The current Ninja model is simple, every time it is invoked, it will re-read build.ninja instructions, check stats of artifacts and do the scheduling.</p>
<p>Instead of making a long-lived compiler, we propose to have a long-lived scheduler. The complexity of a scheduler is significantly lower than a compiler.
Having an in-memory scheduler will help reducing redundant work such as parsing build.ninja instructions which is around of size 2M for 10k files. With the integration of  watch mode, it does not need stat all artifacts each time, this should help increase the scalability of scheduler to 100K files or even more.</p>
<h2><a class="anchor" aria-hidden="true" id="tests-on-a-synthetic-benchmark"></a><a href="#tests-on-a-synthetic-benchmark" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tests on a synthetic benchmark</h2>
<p>Our synthetic bench is borrowed from <a href="http://blog.camlcity.org/blog/omake1.html">OMake</a> and public available <a href="https://github.com/bucklescript/bsb-bench">here</a>.</p>
<blockquote>
<p>The benchmark has these characteristics: The task is to build n^2 libraries with n^2 modules each (for a given small number n), and the dependencies between the modules are created in a way so that we can stress both the dependency analyzer of the build utility and the ability to run commands in parallel.</p>
</blockquote>
<p>We modified the benchmark to add interface file for each implementation file.</p>
<p>The benchmark is running on MacBook Pro 18 with CPU 2.6 GHz Intel Core i7, Memory 32 GB 2400 MHz DDR4</p>
<p>The test is running against <code>n = 3,5,7,9</code>, where the source code size would be <code>2*3^4=162</code>, <code>2*5^4=1250</code>, <code>2*7^4=4802</code>, <code>2*9**4=13122</code>.</p>
<p>Below is what we get for a cold build from scratch:</p>
<table>
<thead>
<tr><th>Source size</th><th>Clean build (ms)</th></tr>
</thead>
<tbody>
<tr><td>0162</td><td>684</td></tr>
<tr><td>1250</td><td>5,100</td></tr>
<tr><td>4802</td><td>24,112</td></tr>
<tr><td>13122</td><td>125,248</td></tr>
</tbody>
</table>
<table>
<thead>
<tr><th>Source size</th><th>Nop build (ms)</th><th>Touching root module (m_1_1_1_1.ml)</th><th>Touching (m_1_1_1.mli)</th></tr>
</thead>
<tbody>
<tr><td>0162</td><td>16</td><td>59</td><td>54</td></tr>
<tr><td>1250</td><td>79</td><td>120</td><td>133</td></tr>
<tr><td>4802</td><td>266</td><td>369</td><td>367</td></tr>
<tr><td>13122</td><td>728</td><td>963</td><td>962</td></tr>
</tbody>
</table>
<p>We can see from the table as size grows, the time spent in edit-build cycle shifts from compilation to the scheduler, this is due to the fact that Ninja scheduler does not save the work for each test.</p>
<table>
<thead>
<tr><th>Source size</th><th>Adding value to root module (m_1_1_1_1.ml)</th><th>Changing root interface</th></tr>
</thead>
<tbody>
<tr><td>0162</td><td>56</td><td>70</td></tr>
<tr><td>1250</td><td>131</td><td>155</td></tr>
<tr><td>4802</td><td>370</td><td>428</td></tr>
<tr><td>13122</td><td>969</td><td>991</td></tr>
</tbody>
</table>
<p>The verbose build log for adding values on source of size <code>13122</code> is as below:</p>
<pre><code class="hljs">test9&gt;ninja <span class="hljs-operator">-</span><span class="hljs-constructor">C</span> lib<span class="hljs-operator">/</span>bs <span class="hljs-operator">-</span>v
ninja: <span class="hljs-constructor">Entering</span> directory <span class="hljs-constructor">`lib</span><span class="hljs-operator">/</span>bs'
<span class="hljs-literal">[</span><span class="hljs-number">1</span><span class="hljs-operator">/</span><span class="hljs-number">2</span><span class="hljs-literal">]</span> <span class="hljs-operator">/</span>usr<span class="hljs-operator">/</span>local<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>node_modules<span class="hljs-operator">/</span>bs<span class="hljs-operator">-</span>platform<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>bsc.exe    <span class="hljs-operator">-</span>w <span class="hljs-operator">-</span><span class="hljs-number">30</span><span class="hljs-operator">-</span><span class="hljs-number">40</span><span class="hljs-operator">+</span><span class="hljs-number">6</span><span class="hljs-operator">+</span><span class="hljs-number">7</span><span class="hljs-operator">+</span><span class="hljs-number">27</span><span class="hljs-operator">+</span><span class="hljs-number">32.</span>.<span class="hljs-number">39</span><span class="hljs-operator">+</span><span class="hljs-number">44</span><span class="hljs-operator">+</span><span class="hljs-number">45</span><span class="hljs-operator">+</span><span class="hljs-number">101</span> <span class="hljs-operator">-</span>nostdlib <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> '<span class="hljs-operator">/</span><span class="hljs-constructor">Users</span><span class="hljs-operator">/</span>hongbozhang<span class="hljs-operator">/</span>git<span class="hljs-operator">/</span>bsb<span class="hljs-operator">-</span>bench<span class="hljs-operator">/</span>test9<span class="hljs-operator">/</span>node_modules<span class="hljs-operator">/</span>bs<span class="hljs-operator">-</span>platform<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>ocaml' <span class="hljs-operator">-</span>color always <span class="hljs-operator">-</span>c <span class="hljs-operator">-</span>o src<span class="hljs-operator">/</span>dir_1_1<span class="hljs-operator">/</span>m_1_1_1_1.mlast <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>syntax<span class="hljs-operator">-</span>only <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>binary<span class="hljs-operator">-</span>ast <span class="hljs-operator">/</span><span class="hljs-constructor">Users</span><span class="hljs-operator">/</span>hongbozhang<span class="hljs-operator">/</span>git<span class="hljs-operator">/</span>bsb<span class="hljs-operator">-</span>bench<span class="hljs-operator">/</span>test9<span class="hljs-operator">/</span>src<span class="hljs-operator">/</span>dir_1_1<span class="hljs-operator">/</span>m_1_1_1_1.ml
<span class="hljs-literal">[</span><span class="hljs-number">2</span><span class="hljs-operator">/</span><span class="hljs-number">2</span><span class="hljs-literal">]</span> <span class="hljs-operator">/</span>usr<span class="hljs-operator">/</span>local<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>node_modules<span class="hljs-operator">/</span>bs<span class="hljs-operator">-</span>platform<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>bsb_helper.exe  <span class="hljs-operator">-</span>g <span class="hljs-number">0</span> <span class="hljs-operator">-</span><span class="hljs-constructor">MD</span> src<span class="hljs-operator">/</span>dir_1_1<span class="hljs-operator">/</span>m_1_1_1_1.mlast
<span class="hljs-literal">[</span><span class="hljs-number">1</span><span class="hljs-operator">/</span><span class="hljs-number">5905</span><span class="hljs-literal">]</span> <span class="hljs-operator">/</span>usr<span class="hljs-operator">/</span>local<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>node_modules<span class="hljs-operator">/</span>bs<span class="hljs-operator">-</span>platform<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>bsc.exe <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>package<span class="hljs-operator">-</span>name test  <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>package<span class="hljs-operator">-</span>output commonjs:lib<span class="hljs-operator">/</span>js<span class="hljs-operator">/</span>src<span class="hljs-operator">/</span>dir_1_1 <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>assume<span class="hljs-operator">-</span>has<span class="hljs-operator">-</span>mli <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>no<span class="hljs-operator">-</span>builtin<span class="hljs-operator">-</span>ppx<span class="hljs-operator">-</span>ml <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>no<span class="hljs-operator">-</span>implicit<span class="hljs-operator">-</span><span class="hljs-keyword">include</span>   <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_4_6 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_4_1 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_4_8 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_6_5 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_6_2 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_8_3 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_8_4 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_2_3 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_2_4 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_6_3 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_4_9 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_6_4 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_4_7 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_2_5 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_2_2 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_8_5 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_8_2 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_9_9 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_3_7 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_1_3 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_9_7 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_3_9 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_1_4 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_7_6 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_7_1 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_5_5 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_7_8 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_5_2 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_3_8 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_9_6 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_1_5 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_9_1 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_1_2 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_3_6 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_9_8 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_3_1 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_5_3 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_5_4 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_7_9 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_7_7 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_8_7 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_2_9 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_8_9 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_2_7 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_4_2 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_6_8 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_4_5 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_6_1 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_6_6 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_2_1 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_2_6 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_8_8 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_8_1 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_2_8 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_8_6 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_6_7 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_6_9 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_4_4 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_4_3 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_7_2 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_7_5 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_5_8 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_5_1 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_5_6 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_1_9 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_3_4 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_3_3 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_9_4 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_1_7 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_9_3 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_5_7 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_7_4 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_5_9 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_7_3 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_9_2 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_1_1 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_9_5 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_1_6 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_3_2 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_1_8 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_3_5  <span class="hljs-operator">-</span>w <span class="hljs-operator">-</span><span class="hljs-number">30</span><span class="hljs-operator">-</span><span class="hljs-number">40</span><span class="hljs-operator">+</span><span class="hljs-number">6</span><span class="hljs-operator">+</span><span class="hljs-number">7</span><span class="hljs-operator">+</span><span class="hljs-number">27</span><span class="hljs-operator">+</span><span class="hljs-number">32.</span>.<span class="hljs-number">39</span><span class="hljs-operator">+</span><span class="hljs-number">44</span><span class="hljs-operator">+</span><span class="hljs-number">45</span><span class="hljs-operator">+</span><span class="hljs-number">101</span> <span class="hljs-operator">-</span>nostdlib <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> '<span class="hljs-operator">/</span><span class="hljs-constructor">Users</span><span class="hljs-operator">/</span>hongbozhang<span class="hljs-operator">/</span>git<span class="hljs-operator">/</span>bsb<span class="hljs-operator">-</span>bench<span class="hljs-operator">/</span>test9<span class="hljs-operator">/</span>node_modules<span class="hljs-operator">/</span>bs<span class="hljs-operator">-</span>platform<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>ocaml' <span class="hljs-operator">-</span>color always <span class="hljs-operator">-</span>o src<span class="hljs-operator">/</span>dir_1_1<span class="hljs-operator">/</span>m_1_1_1_1.cmj <span class="hljs-operator">-</span>c  src<span class="hljs-operator">/</span>dir_1_1<span class="hljs-operator">/</span>m_1_1_1_1.mlast 
<span class="hljs-constructor">File</span> <span class="hljs-string">"/Users/hongbozhang/git/bsb-bench/test9/src/dir_1_1/m_1_1_1_1.ml"</span>, line <span class="hljs-number">4</span>, characters <span class="hljs-number">4</span><span class="hljs-operator">-</span><span class="hljs-number">5</span>:
<span class="hljs-constructor">Warning</span> <span class="hljs-number">32</span>: unused value a.

</code></pre>
<p>Ignoring the preprocess stage, We can see there are 5906 jobs scheduled but only one job is processed. This is because adding a single value does not change <code>m_1_1_1_1.cmj</code> so that the change of propogation is stopped immediately.</p>
<p>The result is surprisingly good even if change the interface of root files, by looking at the verbose build log:</p>
<pre><code class="hljs">test9&gt;ninja <span class="hljs-operator">-</span><span class="hljs-constructor">C</span> lib<span class="hljs-operator">/</span>bs <span class="hljs-operator">-</span>v
ninja: <span class="hljs-constructor">Entering</span> directory <span class="hljs-constructor">`lib</span><span class="hljs-operator">/</span>bs'
<span class="hljs-literal">[</span><span class="hljs-number">1</span><span class="hljs-operator">/</span><span class="hljs-number">2</span><span class="hljs-literal">]</span> <span class="hljs-operator">/</span>usr<span class="hljs-operator">/</span>local<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>node_modules<span class="hljs-operator">/</span>bs<span class="hljs-operator">-</span>platform<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>bsc.exe    <span class="hljs-operator">-</span>w <span class="hljs-operator">-</span><span class="hljs-number">30</span><span class="hljs-operator">-</span><span class="hljs-number">40</span><span class="hljs-operator">+</span><span class="hljs-number">6</span><span class="hljs-operator">+</span><span class="hljs-number">7</span><span class="hljs-operator">+</span><span class="hljs-number">27</span><span class="hljs-operator">+</span><span class="hljs-number">32.</span>.<span class="hljs-number">39</span><span class="hljs-operator">+</span><span class="hljs-number">44</span><span class="hljs-operator">+</span><span class="hljs-number">45</span><span class="hljs-operator">+</span><span class="hljs-number">101</span> <span class="hljs-operator">-</span>nostdlib <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> '<span class="hljs-operator">/</span><span class="hljs-constructor">Users</span><span class="hljs-operator">/</span>hongbozhang<span class="hljs-operator">/</span>git<span class="hljs-operator">/</span>bsb<span class="hljs-operator">-</span>bench<span class="hljs-operator">/</span>test9<span class="hljs-operator">/</span>node_modules<span class="hljs-operator">/</span>bs<span class="hljs-operator">-</span>platform<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>ocaml' <span class="hljs-operator">-</span>color always <span class="hljs-operator">-</span>c <span class="hljs-operator">-</span>o src<span class="hljs-operator">/</span>dir_1_1<span class="hljs-operator">/</span>m_1_1_1_1.mliast <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>syntax<span class="hljs-operator">-</span>only <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>binary<span class="hljs-operator">-</span>ast <span class="hljs-operator">/</span><span class="hljs-constructor">Users</span><span class="hljs-operator">/</span>hongbozhang<span class="hljs-operator">/</span>git<span class="hljs-operator">/</span>bsb<span class="hljs-operator">-</span>bench<span class="hljs-operator">/</span>test9<span class="hljs-operator">/</span>src<span class="hljs-operator">/</span>dir_1_1<span class="hljs-operator">/</span>m_1_1_1_1.mli
<span class="hljs-literal">[</span><span class="hljs-number">2</span><span class="hljs-operator">/</span><span class="hljs-number">2</span><span class="hljs-literal">]</span> <span class="hljs-operator">/</span>usr<span class="hljs-operator">/</span>local<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>node_modules<span class="hljs-operator">/</span>bs<span class="hljs-operator">-</span>platform<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>bsb_helper.exe  <span class="hljs-operator">-</span>g <span class="hljs-number">0</span> <span class="hljs-operator">-</span><span class="hljs-constructor">MD</span> src<span class="hljs-operator">/</span>dir_1_1<span class="hljs-operator">/</span>m_1_1_1_1.mliast
<span class="hljs-literal">[</span><span class="hljs-number">1</span><span class="hljs-operator">/</span><span class="hljs-number">5906</span><span class="hljs-literal">]</span> <span class="hljs-operator">/</span>usr<span class="hljs-operator">/</span>local<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>node_modules<span class="hljs-operator">/</span>bs<span class="hljs-operator">-</span>platform<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>bsc.exe <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>package<span class="hljs-operator">-</span>name test  <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>package<span class="hljs-operator">-</span>output commonjs:lib<span class="hljs-operator">/</span>js<span class="hljs-operator">/</span>src<span class="hljs-operator">/</span>dir_1_1 <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>no<span class="hljs-operator">-</span>builtin<span class="hljs-operator">-</span>ppx<span class="hljs-operator">-</span>mli <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>no<span class="hljs-operator">-</span>implicit<span class="hljs-operator">-</span><span class="hljs-keyword">include</span>  <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_4_6 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_4_1 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_4_8 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_6_5 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_6_2 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_8_3 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_8_4 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_2_3 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_2_4 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_6_3 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_4_9 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_6_4 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_4_7 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_2_5 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_2_2 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_8_5 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_8_2 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_9_9 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_3_7 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_1_3 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_9_7 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_3_9 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_1_4 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_7_6 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_7_1 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_5_5 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_7_8 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_5_2 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_3_8 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_9_6 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_1_5 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_9_1 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_1_2 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_3_6 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_9_8 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_3_1 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_5_3 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_5_4 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_7_9 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_7_7 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_8_7 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_2_9 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_8_9 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_2_7 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_4_2 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_6_8 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_4_5 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_6_1 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_6_6 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_2_1 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_2_6 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_8_8 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_8_1 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_2_8 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_8_6 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_6_7 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_6_9 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_4_4 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_4_3 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_7_2 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_7_5 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_5_8 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_5_1 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_5_6 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_1_9 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_3_4 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_3_3 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_9_4 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_1_7 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_9_3 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_5_7 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_7_4 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_5_9 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_7_3 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_9_2 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_1_1 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_9_5 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_1_6 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_3_2 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_1_8 <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> src<span class="hljs-operator">/</span>dir_3_5  <span class="hljs-operator">-</span>w <span class="hljs-operator">-</span><span class="hljs-number">30</span><span class="hljs-operator">-</span><span class="hljs-number">40</span><span class="hljs-operator">+</span><span class="hljs-number">6</span><span class="hljs-operator">+</span><span class="hljs-number">7</span><span class="hljs-operator">+</span><span class="hljs-number">27</span><span class="hljs-operator">+</span><span class="hljs-number">32.</span>.<span class="hljs-number">39</span><span class="hljs-operator">+</span><span class="hljs-number">44</span><span class="hljs-operator">+</span><span class="hljs-number">45</span><span class="hljs-operator">+</span><span class="hljs-number">101</span> <span class="hljs-operator">-</span>nostdlib <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> '<span class="hljs-operator">/</span><span class="hljs-constructor">Users</span><span class="hljs-operator">/</span>hongbozhang<span class="hljs-operator">/</span>git<span class="hljs-operator">/</span>bsb<span class="hljs-operator">-</span>bench<span class="hljs-operator">/</span>test9<span class="hljs-operator">/</span>node_modules<span class="hljs-operator">/</span>bs<span class="hljs-operator">-</span>platform<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>ocaml' <span class="hljs-operator">-</span>color always <span class="hljs-operator">-</span>o src<span class="hljs-operator">/</span>dir_1_1<span class="hljs-operator">/</span>m_1_1_1_1.cmi <span class="hljs-operator">-</span>c  src<span class="hljs-operator">/</span>dir_1_1<span class="hljs-operator">/</span>m_1_1_1_1.mliast
<span class="hljs-literal">[</span><span class="hljs-number">2</span><span class="hljs-operator">/</span><span class="hljs-number">5906</span><span class="hljs-literal">]</span> <span class="hljs-operator">/</span>usr<span class="hljs-operator">/</span>local<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>node_modules<span class="hljs-operator">/</span>bs<span class="hljs-operator">-</span>platform<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>bsc.exe <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>package<span class="hljs-operator">-</span>name test  <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>package<span class="hljs-operator">-</span>output commonjs:lib<span class="hljs-operator">/</span>js<span class="hljs-operator">/</span>src<span class="hljs-operator">/</span>dir_1_1 <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>assume<span class="hljs-operator">-</span>has<span class="hljs-operator">-</span>mli <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>no<span class="hljs-operator">-</span>builtin<span class="hljs-operator">-</span>ppx<span class="hljs-operator">-</span>ml <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>no<span class="hljs-operator">-</span>implicit<span class="hljs-operator">-</span><span class="hljs-keyword">include</span>   <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> <span class="hljs-operator">...</span>  <span class="hljs-operator">-</span>color always <span class="hljs-operator">-</span>o src<span class="hljs-operator">/</span>dir_1_1<span class="hljs-operator">/</span>m_1_1_1_1.cmj <span class="hljs-operator">-</span>c  src<span class="hljs-operator">/</span>dir_1_1<span class="hljs-operator">/</span>m_1_1_1_1.mlast 
<span class="hljs-literal">[</span><span class="hljs-number">3</span><span class="hljs-operator">/</span><span class="hljs-number">5906</span><span class="hljs-literal">]</span> <span class="hljs-operator">/</span>usr<span class="hljs-operator">/</span>local<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>node_modules<span class="hljs-operator">/</span>bs<span class="hljs-operator">-</span>platform<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>bsc.exe <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>package<span class="hljs-operator">-</span>name test  <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>package<span class="hljs-operator">-</span>output commonjs:lib<span class="hljs-operator">/</span>js<span class="hljs-operator">/</span>src<span class="hljs-operator">/</span>dir_1_1 <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>assume<span class="hljs-operator">-</span>has<span class="hljs-operator">-</span>mli <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>no<span class="hljs-operator">-</span>builtin<span class="hljs-operator">-</span>ppx<span class="hljs-operator">-</span>ml <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>no<span class="hljs-operator">-</span>implicit<span class="hljs-operator">-</span><span class="hljs-keyword">include</span>   <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> <span class="hljs-operator">...</span>  <span class="hljs-operator">-</span>w <span class="hljs-operator">-</span><span class="hljs-number">30</span><span class="hljs-operator">-</span><span class="hljs-number">40</span><span class="hljs-operator">+</span><span class="hljs-number">6</span><span class="hljs-operator">+</span><span class="hljs-number">7</span><span class="hljs-operator">+</span><span class="hljs-number">27</span><span class="hljs-operator">+</span><span class="hljs-number">32.</span>.<span class="hljs-number">39</span><span class="hljs-operator">+</span><span class="hljs-number">44</span><span class="hljs-operator">+</span><span class="hljs-number">45</span><span class="hljs-operator">+</span><span class="hljs-number">101</span> <span class="hljs-operator">-</span>nostdlib <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> '<span class="hljs-operator">/</span><span class="hljs-constructor">Users</span><span class="hljs-operator">/</span>hongbozhang<span class="hljs-operator">/</span>git<span class="hljs-operator">/</span>bsb<span class="hljs-operator">-</span>bench<span class="hljs-operator">/</span>test9<span class="hljs-operator">/</span>node_modules<span class="hljs-operator">/</span>bs<span class="hljs-operator">-</span>platform<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>ocaml' <span class="hljs-operator">-</span>color always <span class="hljs-operator">-</span>o src<span class="hljs-operator">/</span>dir_1_1<span class="hljs-operator">/</span>m_1_1_2_2.cmj <span class="hljs-operator">-</span>c  src<span class="hljs-operator">/</span>dir_1_1<span class="hljs-operator">/</span>m_1_1_2_2.mlast 
<span class="hljs-literal">[</span><span class="hljs-number">4</span><span class="hljs-operator">/</span><span class="hljs-number">5906</span><span class="hljs-literal">]</span> <span class="hljs-operator">/</span>usr<span class="hljs-operator">/</span>local<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>node_modules<span class="hljs-operator">/</span>bs<span class="hljs-operator">-</span>platform<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>bsc.exe <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>package<span class="hljs-operator">-</span>name test  <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>package<span class="hljs-operator">-</span>output commonjs:lib<span class="hljs-operator">/</span>js<span class="hljs-operator">/</span>src<span class="hljs-operator">/</span>dir_1_1 <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>assume<span class="hljs-operator">-</span>has<span class="hljs-operator">-</span>mli <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>no<span class="hljs-operator">-</span>builtin<span class="hljs-operator">-</span>ppx<span class="hljs-operator">-</span>ml <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>no<span class="hljs-operator">-</span>implicit<span class="hljs-operator">-</span><span class="hljs-keyword">include</span>   <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> <span class="hljs-operator">...</span> <span class="hljs-operator">-</span>color always <span class="hljs-operator">-</span>o src<span class="hljs-operator">/</span>dir_1_1<span class="hljs-operator">/</span>m_1_1_2_1.cmj <span class="hljs-operator">-</span>c  src<span class="hljs-operator">/</span>dir_1_1<span class="hljs-operator">/</span>m_1_1_2_1.mlast 
<span class="hljs-literal">[</span><span class="hljs-number">5</span><span class="hljs-operator">/</span><span class="hljs-number">5906</span><span class="hljs-literal">]</span> <span class="hljs-operator">/</span>usr<span class="hljs-operator">/</span>local<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>node_modules<span class="hljs-operator">/</span>bs<span class="hljs-operator">-</span>platform<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>bsc.exe <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>package<span class="hljs-operator">-</span>name test  <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>package<span class="hljs-operator">-</span>output commonjs:lib<span class="hljs-operator">/</span>js<span class="hljs-operator">/</span>src<span class="hljs-operator">/</span>dir_1_1 <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>assume<span class="hljs-operator">-</span>has<span class="hljs-operator">-</span>mli <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>no<span class="hljs-operator">-</span>builtin<span class="hljs-operator">-</span>ppx<span class="hljs-operator">-</span>ml <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>no<span class="hljs-operator">-</span>implicit<span class="hljs-operator">-</span><span class="hljs-keyword">include</span>   <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> <span class="hljs-operator">...</span> <span class="hljs-operator">-</span>color always <span class="hljs-operator">-</span>o src<span class="hljs-operator">/</span>dir_1_1<span class="hljs-operator">/</span>m_1_1_2_3.cmj <span class="hljs-operator">-</span>c  src<span class="hljs-operator">/</span>dir_1_1<span class="hljs-operator">/</span>m_1_1_2_3.mlast 
<span class="hljs-literal">[</span><span class="hljs-number">6</span><span class="hljs-operator">/</span><span class="hljs-number">5906</span><span class="hljs-literal">]</span> <span class="hljs-operator">/</span>usr<span class="hljs-operator">/</span>local<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>node_modules<span class="hljs-operator">/</span>bs<span class="hljs-operator">-</span>platform<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>bsc.exe <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>package<span class="hljs-operator">-</span>name test  <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>package<span class="hljs-operator">-</span>output commonjs:lib<span class="hljs-operator">/</span>js<span class="hljs-operator">/</span>src<span class="hljs-operator">/</span>dir_1_1 <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>assume<span class="hljs-operator">-</span>has<span class="hljs-operator">-</span>mli <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>no<span class="hljs-operator">-</span>builtin<span class="hljs-operator">-</span>ppx<span class="hljs-operator">-</span>ml <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>no<span class="hljs-operator">-</span>implicit<span class="hljs-operator">-</span><span class="hljs-keyword">include</span>   <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> <span class="hljs-operator">...</span> <span class="hljs-operator">-</span>color always <span class="hljs-operator">-</span>o src<span class="hljs-operator">/</span>dir_1_1<span class="hljs-operator">/</span>m_1_1_2_9.cmj <span class="hljs-operator">-</span>c  src<span class="hljs-operator">/</span>dir_1_1<span class="hljs-operator">/</span>m_1_1_2_9.mlast 
<span class="hljs-literal">[</span><span class="hljs-number">7</span><span class="hljs-operator">/</span><span class="hljs-number">5906</span><span class="hljs-literal">]</span> <span class="hljs-operator">/</span>usr<span class="hljs-operator">/</span>local<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>node_modules<span class="hljs-operator">/</span>bs<span class="hljs-operator">-</span>platform<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>bsc.exe <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>package<span class="hljs-operator">-</span>name test  <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>package<span class="hljs-operator">-</span>output commonjs:lib<span class="hljs-operator">/</span>js<span class="hljs-operator">/</span>src<span class="hljs-operator">/</span>dir_1_1 <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>assume<span class="hljs-operator">-</span>has<span class="hljs-operator">-</span>mli <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>no<span class="hljs-operator">-</span>builtin<span class="hljs-operator">-</span>ppx<span class="hljs-operator">-</span>ml <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>no<span class="hljs-operator">-</span>implicit<span class="hljs-operator">-</span><span class="hljs-keyword">include</span>   <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> <span class="hljs-operator">...</span> <span class="hljs-operator">-</span>color always <span class="hljs-operator">-</span>o src<span class="hljs-operator">/</span>dir_1_1<span class="hljs-operator">/</span>m_1_1_2_4.cmj <span class="hljs-operator">-</span>c  src<span class="hljs-operator">/</span>dir_1_1<span class="hljs-operator">/</span>m_1_1_2_4.mlast 
<span class="hljs-literal">[</span><span class="hljs-number">8</span><span class="hljs-operator">/</span><span class="hljs-number">5906</span><span class="hljs-literal">]</span> <span class="hljs-operator">/</span>usr<span class="hljs-operator">/</span>local<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>node_modules<span class="hljs-operator">/</span>bs<span class="hljs-operator">-</span>platform<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>bsc.exe <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>package<span class="hljs-operator">-</span>name test  <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>package<span class="hljs-operator">-</span>output commonjs:lib<span class="hljs-operator">/</span>js<span class="hljs-operator">/</span>src<span class="hljs-operator">/</span>dir_1_1 <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>assume<span class="hljs-operator">-</span>has<span class="hljs-operator">-</span>mli <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>no<span class="hljs-operator">-</span>builtin<span class="hljs-operator">-</span>ppx<span class="hljs-operator">-</span>ml <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>no<span class="hljs-operator">-</span>implicit<span class="hljs-operator">-</span><span class="hljs-keyword">include</span>   <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> <span class="hljs-operator">...</span> <span class="hljs-operator">-</span>color always <span class="hljs-operator">-</span>o src<span class="hljs-operator">/</span>dir_1_1<span class="hljs-operator">/</span>m_1_1_2_5.cmj <span class="hljs-operator">-</span>c  src<span class="hljs-operator">/</span>dir_1_1<span class="hljs-operator">/</span>m_1_1_2_5.mlast 
<span class="hljs-literal">[</span><span class="hljs-number">9</span><span class="hljs-operator">/</span><span class="hljs-number">5906</span><span class="hljs-literal">]</span> <span class="hljs-operator">/</span>usr<span class="hljs-operator">/</span>local<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>node_modules<span class="hljs-operator">/</span>bs<span class="hljs-operator">-</span>platform<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>bsc.exe <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>package<span class="hljs-operator">-</span>name test  <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>package<span class="hljs-operator">-</span>output commonjs:lib<span class="hljs-operator">/</span>js<span class="hljs-operator">/</span>src<span class="hljs-operator">/</span>dir_1_1 <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>assume<span class="hljs-operator">-</span>has<span class="hljs-operator">-</span>mli <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>no<span class="hljs-operator">-</span>builtin<span class="hljs-operator">-</span>ppx<span class="hljs-operator">-</span>ml <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>no<span class="hljs-operator">-</span>implicit<span class="hljs-operator">-</span><span class="hljs-keyword">include</span>   <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> <span class="hljs-operator">...</span> <span class="hljs-operator">-</span>color always <span class="hljs-operator">-</span>o src<span class="hljs-operator">/</span>dir_1_1<span class="hljs-operator">/</span>m_1_1_2_6.cmj <span class="hljs-operator">-</span>c  src<span class="hljs-operator">/</span>dir_1_1<span class="hljs-operator">/</span>m_1_1_2_6.mlast 
<span class="hljs-literal">[</span><span class="hljs-number">10</span><span class="hljs-operator">/</span><span class="hljs-number">5906</span><span class="hljs-literal">]</span> <span class="hljs-operator">/</span>usr<span class="hljs-operator">/</span>local<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>node_modules<span class="hljs-operator">/</span>bs<span class="hljs-operator">-</span>platform<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>bsc.exe <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>package<span class="hljs-operator">-</span>name test  <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>package<span class="hljs-operator">-</span>output commonjs:lib<span class="hljs-operator">/</span>js<span class="hljs-operator">/</span>src<span class="hljs-operator">/</span>dir_1_1 <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>assume<span class="hljs-operator">-</span>has<span class="hljs-operator">-</span>mli <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>no<span class="hljs-operator">-</span>builtin<span class="hljs-operator">-</span>ppx<span class="hljs-operator">-</span>ml <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>no<span class="hljs-operator">-</span>implicit<span class="hljs-operator">-</span><span class="hljs-keyword">include</span>   <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> <span class="hljs-operator">...</span> <span class="hljs-operator">-</span>color always <span class="hljs-operator">-</span>o src<span class="hljs-operator">/</span>dir_1_1<span class="hljs-operator">/</span>m_1_1_2_7.cmj <span class="hljs-operator">-</span>c  src<span class="hljs-operator">/</span>dir_1_1<span class="hljs-operator">/</span>m_1_1_2_7.mlast 
<span class="hljs-literal">[</span><span class="hljs-number">11</span><span class="hljs-operator">/</span><span class="hljs-number">5906</span><span class="hljs-literal">]</span> <span class="hljs-operator">/</span>usr<span class="hljs-operator">/</span>local<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>node_modules<span class="hljs-operator">/</span>bs<span class="hljs-operator">-</span>platform<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>bsc.exe <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>package<span class="hljs-operator">-</span>name test  <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>package<span class="hljs-operator">-</span>output commonjs:lib<span class="hljs-operator">/</span>js<span class="hljs-operator">/</span>src<span class="hljs-operator">/</span>dir_1_1 <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>assume<span class="hljs-operator">-</span>has<span class="hljs-operator">-</span>mli <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>no<span class="hljs-operator">-</span>builtin<span class="hljs-operator">-</span>ppx<span class="hljs-operator">-</span>ml <span class="hljs-operator">-</span>bs<span class="hljs-operator">-</span>no<span class="hljs-operator">-</span>implicit<span class="hljs-operator">-</span><span class="hljs-keyword">include</span>   <span class="hljs-operator">-</span><span class="hljs-constructor">I</span> <span class="hljs-operator">...</span> <span class="hljs-operator">-</span>color always <span class="hljs-operator">-</span>o src<span class="hljs-operator">/</span>dir_1_1<span class="hljs-operator">/</span>m_1_1_2_8.cmj <span class="hljs-operator">-</span>c  src<span class="hljs-operator">/</span>dir_1_1<span class="hljs-operator">/</span>m_1_1_2_8.mlast
</code></pre>
<p>The log means that there are 5906 jobs to be scheduled but only 11 jobs processed. This is because there only 9 direct dependencies,
the cmj/cmi changes' propogation stops in the first level of dependency, indirect dependencies are not propagated any more since the intermediate representation stays stable after that. There are 9 more jobs to do compared with changing implementation but the latency only increased by 30ms, which means the scheduler does a good job in parallelism.</p>
<p>The real world scenario may be a bit worse than our synthetic benchmark, since our syntethic benchmark only impose dependencies across implementation files, the dependencies across interface files are flat.</p>
<p>To conclude, currently BuckleScript scales very well to projects with around 10k files, and with some work in improving the scheduler, we believe it is not too difficult to scale it to 100K files or even more. To reach such enormous scalability in a reliable way, we propose to have a long-lived scheduler and fast cold compiler. The language interface design and the design of the data structure for the implementation will make the longest rebuild propogation chain bounded by two in most cases.</p>
</span></div></div><div class="blogSocialSection"></div></div><div class="blog-recent"><a class="button" href="/blog">Recent Posts</a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#the-importance-of-compilers-cold-performance">The importance of compiler's cold performance</a></li><li><a href="#the-art-of-being-incremental">The art of being incremental</a></li><li><a href="#a-fast-scheduler">A fast scheduler</a></li><li><a href="#tests-on-a-synthetic-benchmark">Tests on a synthetic benchmark</a></li></ul></nav></div><span></span></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '0fd97db83891aa20810559812d9e69ac',
                indexName: 'bucklescript',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["lang:en"]}
              });
            </script></body></html>